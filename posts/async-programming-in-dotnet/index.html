<!doctype html>














<!-- `site.alt_lang` can specify a language different from the UI -->
<html lang="en" >
  <head>
  <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
  <meta name="theme-color" media="(prefers-color-scheme: light)" content="#f7f7f7">
  <meta name="theme-color" media="(prefers-color-scheme: dark)" content="#1b1b1e">
  <meta name="mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
  <meta
    name="viewport"
    content="width=device-width, user-scalable=no initial-scale=1, shrink-to-fit=no, viewport-fit=cover"
  ><!-- Setup Open Graph image -->

  

  <!-- Begin Jekyll SEO tag v2.8.0 -->
<meta name="generator" content="Jekyll v4.3.4" />
<meta property="og:title" content="Asynchronous programming note in .NET" />
<meta property="og:locale" content="en" />
<meta name="description" content="Background Asynchronous programming has been around for a while, we can see them everywhere. It was invented to improve the responsiveness of applications and overall user experience; In another word, no user would like to see a frozen screen. As a programmer, it takes me a bit effort to fully understand the concept, its implementation and mechanism. What I am trying to say Whether you are a new to programming or a developer, you probably have read the following sentence. “Asynchronous Programming is not about blocking something, but waiting for something to be finished.”" />
<meta property="og:description" content="Background Asynchronous programming has been around for a while, we can see them everywhere. It was invented to improve the responsiveness of applications and overall user experience; In another word, no user would like to see a frozen screen. As a programmer, it takes me a bit effort to fully understand the concept, its implementation and mechanism. What I am trying to say Whether you are a new to programming or a developer, you probably have read the following sentence. “Asynchronous Programming is not about blocking something, but waiting for something to be finished.”" />
<link rel="canonical" href="/posts/async-programming-in-dotnet/" />
<meta property="og:url" content="/posts/async-programming-in-dotnet/" />
<meta property="og:site_name" content="Nan W" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2024-12-01T00:34:00+08:00" />
<meta name="twitter:card" content="summary" />
<meta property="twitter:title" content="Asynchronous programming note in .NET" />
<meta name="twitter:site" content="@NanAus1991" />
<script type="application/ld+json">
{"@context":"https://schema.org","@type":"BlogPosting","dateModified":"2024-12-01T00:34:00+08:00","datePublished":"2024-12-01T00:34:00+08:00","description":"Background Asynchronous programming has been around for a while, we can see them everywhere. It was invented to improve the responsiveness of applications and overall user experience; In another word, no user would like to see a frozen screen. As a programmer, it takes me a bit effort to fully understand the concept, its implementation and mechanism. What I am trying to say Whether you are a new to programming or a developer, you probably have read the following sentence. “Asynchronous Programming is not about blocking something, but waiting for something to be finished.”","headline":"Asynchronous programming note in .NET","mainEntityOfPage":{"@type":"WebPage","@id":"/posts/async-programming-in-dotnet/"},"url":"/posts/async-programming-in-dotnet/"}</script>
<!-- End Jekyll SEO tag -->


  <title>Asynchronous programming note in .NET | Nan W
  </title>

  <!--
  The Favicons for Web, Android, Microsoft, and iOS (iPhone and iPad) Apps
  Generated by: https://realfavicongenerator.net/
-->



<link rel="apple-touch-icon" sizes="180x180" href="/assets/img/favicons/apple-touch-icon.png">
<link rel="icon" type="image/png" sizes="32x32" href="/assets/img/favicons/favicon-32x32.png">
<link rel="icon" type="image/png" sizes="16x16" href="/assets/img/favicons/favicon-16x16.png">

  <link rel="manifest" href="/assets/img/favicons/site.webmanifest">

<link rel="shortcut icon" href="/assets/img/favicons/favicon.ico">
<meta name="apple-mobile-web-app-title" content="Nan W">
<meta name="application-name" content="Nan W">
<meta name="msapplication-TileColor" content="#da532c">
<meta name="msapplication-config" content="/assets/img/favicons/browserconfig.xml">
<meta name="theme-color" content="#ffffff">


  <!-- Resource Hints -->
  
    
      
        <link rel="preconnect" href="https://fonts.googleapis.com" >
      
        <link rel="dns-prefetch" href="https://fonts.googleapis.com" >
      
    
      
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
      
        <link rel="dns-prefetch" href="https://fonts.gstatic.com" >
      
    
      
        <link rel="preconnect" href="https://cdn.jsdelivr.net" >
      
        <link rel="dns-prefetch" href="https://cdn.jsdelivr.net" >
      
    
  

  <!-- Bootstrap -->
  
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css">
  

  <!-- Theme style -->
  <link rel="stylesheet" href="/assets/css/jekyll-theme-chirpy.css">

  <!-- Web Font -->
  <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Lato:wght@300;400&family=Source+Sans+Pro:wght@400;600;700;900&display=swap">

  <!-- Font Awesome Icons -->
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.7.1/css/all.min.css">

  <!-- 3rd-party Dependencies -->

  
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/tocbot@4.32.2/dist/tocbot.min.css">
  

  
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/loading-attribute-polyfill@2.1.1/dist/loading-attribute-polyfill.min.css">
  

  
    <!-- Image Popup -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/glightbox@3.3.0/dist/css/glightbox.min.css">
  

  <!-- Scripts -->

  <script src="/assets/js/dist/theme.min.js"></script>

  <!-- JS selector for site. -->

<!-- commons -->



<!-- layout specified -->


  

  
    <!-- image lazy-loading & popup & clipboard -->
    
  















  
    

    

  

  
    

    

  

  
    

    

  

  
    

    

  

  
    

    

  

  
    

    

  

  
    

    

  

  
    

    

  

  
    

    

  



  <script defer src="https://cdn.jsdelivr.net/combine/npm/simple-jekyll-search@1.10.0/dest/simple-jekyll-search.min.js,npm/loading-attribute-polyfill@2.1.1/dist/loading-attribute-polyfill.umd.min.js,npm/glightbox@3.3.0/dist/js/glightbox.min.js,npm/clipboard@2.0.11/dist/clipboard.min.js,npm/dayjs@1.11.13/dayjs.min.js,npm/dayjs@1.11.13/locale/en.js,npm/dayjs@1.11.13/plugin/relativeTime.js,npm/dayjs@1.11.13/plugin/localizedFormat.js,npm/tocbot@4.32.2/dist/tocbot.min.js"></script>







<script defer src="/assets/js/dist/post.min.js"></script>



<!-- Pageviews -->

  

  



  

  <!-- A placeholder to allow defining custom metadata -->

</head>


  <body>
    <!-- The Side Bar -->

<aside aria-label="Sidebar" id="sidebar" class="d-flex flex-column align-items-end">
  <header class="profile-wrapper">
    <a href="/" id="avatar" class="rounded-circle"><img src="https://nanwang2016.github.io/assets/icon/favicon192.png" width="112" height="112" alt="avatar" onerror="this.style.display='none'"></a>

    <a class="site-title d-block" href="/">Nan W</a>
    <p class="site-subtitle fst-italic mb-0">A software engineer's blog</p>
  </header>
  <!-- .profile-wrapper -->

  <nav class="flex-column flex-grow-1 w-100 ps-0">
    <ul class="nav">
      <!-- home -->
      <li class="nav-item">
        <a href="/" class="nav-link">
          <i class="fa-fw fas fa-home"></i>
          <span>HOME</span>
        </a>
      </li>
      <!-- the real tabs -->
      
        <li class="nav-item">
          <a href="/categories/" class="nav-link">
            <i class="fa-fw fas fa-stream"></i>
            

            <span>CATEGORIES</span>
          </a>
        </li>
        <!-- .nav-item -->
      
        <li class="nav-item">
          <a href="/tags/" class="nav-link">
            <i class="fa-fw fas fa-tags"></i>
            

            <span>TAGS</span>
          </a>
        </li>
        <!-- .nav-item -->
      
        <li class="nav-item">
          <a href="/archives/" class="nav-link">
            <i class="fa-fw fas fa-archive"></i>
            

            <span>ARCHIVES</span>
          </a>
        </li>
        <!-- .nav-item -->
      
        <li class="nav-item">
          <a href="/about/" class="nav-link">
            <i class="fa-fw fas fa-info-circle"></i>
            

            <span>ABOUT</span>
          </a>
        </li>
        <!-- .nav-item -->
      
    </ul>
  </nav>

  <div class="sidebar-bottom d-flex flex-wrap  align-items-center w-100">
    
      <button type="button" class="btn btn-link nav-link" aria-label="Switch Mode" id="mode-toggle">
        <i class="fas fa-adjust"></i>
      </button>

      
        <span class="icon-border"></span>
      
    

    
      

      
        <a
          href="https://github.com/nanwang2016"
          aria-label="github"
          

          
            target="_blank"
            
          

          

          
            rel="noopener noreferrer"
          
        >
          <i class="fab fa-github"></i>
        </a>
      
    
      

      
        <a
          href="https://twitter.com/NanAus1991"
          aria-label="twitter"
          

          
            target="_blank"
            
          

          

          
            rel="noopener noreferrer"
          
        >
          <i class="fa-brands fa-x-twitter"></i>
        </a>
      
    
      

      
        <a
          href="javascript:location.href = 'mailto:' + ['nanwang2016','gmail.com'].join('@')"
          aria-label="email"
          

          

          

          
        >
          <i class="fas fa-envelope"></i>
        </a>
      
    
      

      
        <a
          href="/feed.xml"
          aria-label="rss"
          

          

          

          
        >
          <i class="fas fa-rss"></i>
        </a>
      
    
  </div>
  <!-- .sidebar-bottom -->
</aside>
<!-- #sidebar -->


    <div id="main-wrapper" class="d-flex justify-content-center">
      <div class="container d-flex flex-column px-xxl-5">
        <!-- The Top Bar -->

<header id="topbar-wrapper" aria-label="Top Bar">
  <div
    id="topbar"
    class="d-flex align-items-center justify-content-between px-lg-3 h-100"
  >
    <nav id="breadcrumb" aria-label="Breadcrumb">
      

      
        
          
            <span>
              <a href="/">Home</a>
            </span>

          
        
          
        
          
            
              <span>Asynchronous programming note in .NET</span>
            

          
        
      
    </nav>
    <!-- endof #breadcrumb -->

    <button type="button" id="sidebar-trigger" class="btn btn-link">
      <i class="fas fa-bars fa-fw"></i>
    </button>

    <div id="topbar-title">
      Post
    </div>

    <button type="button" id="search-trigger" class="btn btn-link">
      <i class="fas fa-search fa-fw"></i>
    </button>

    <search id="search" class="align-items-center ms-3 ms-lg-0">
      <i class="fas fa-search fa-fw"></i>
      <input
        class="form-control"
        id="search-input"
        type="search"
        aria-label="search"
        autocomplete="off"
        placeholder="Search..."
      >
    </search>
    <button type="button" class="btn btn-link text-decoration-none" id="search-cancel">Cancel</button>
  </div>
</header>


        <div class="row flex-grow-1">
          <main aria-label="Main Content" class="col-12 col-lg-11 col-xl-9 px-md-4">
            
              <!-- Refactor the HTML structure -->



<!--
  In order to allow a wide table to scroll horizontally,
  we suround the markdown table with `<div class="table-wrapper">` and `</div>`
-->



<!--
  Fixed kramdown code highlight rendering:
  https://github.com/penibelst/jekyll-compress-html/issues/101
  https://github.com/penibelst/jekyll-compress-html/issues/71#issuecomment-188144901
-->



<!-- Change the icon of checkbox -->



<!-- Handle images -->





<!-- Add header for code snippets -->



<!-- Create heading anchors -->





  
  

  

  
  

  
    
    

    
      
        
        
      

      
      

      
      
      

      
    
      

      
      

      
      
      

      
    
      

      
      

      
      
      

      
    
      

      
      

      
      
      

      
    
      

      
      

      
      
      

      
    
      

      
      

      
      
      

      
    

    
  

  
  

  
    
    

    
      
        
        
      

      
      

      
      
      

      
    
      

      
      

      
      
      

      
    
      

      
      

      
      
      

      
    
      

      
      

      
      
      

      
    
      

      
      

      
      
      

      
    

    
  

  
  

  




<!-- return -->










<article class="px-1" data-toc="true">
  <header>
    <h1 data-toc-skip>Asynchronous programming note in .NET</h1>
    

    <div class="post-meta text-muted">
      <!-- published date -->
      <span>
        Posted
        <!--
  Date format snippet
  See: ${JS_ROOT}/utils/locale-dateime.js
-->




<time
  
  data-ts="1732984440"
  data-df="ll"
  
    data-bs-toggle="tooltip" data-bs-placement="bottom"
  
>
  Dec  1, 2024
</time>

      </span>

      <!-- lastmod date -->
      

      

      <div class="d-flex justify-content-between">
        <!-- author(s) -->
        <span>
          

          By

          <em>
            
              <a href="https://twitter.com/username">Nan</a>
            
          </em>
        </span>

        <div>
          <!-- pageviews -->
          

          <!-- read time -->
          <!-- Calculate the post's reading time, and display the word count in tooltip -->



<!-- words per minute -->










<!-- return element -->
<span
  class="readtime"
  data-bs-toggle="tooltip"
  data-bs-placement="bottom"
  title="1257 words"
>
  <em>6 min</em> read</span>

        </div>
      </div>
    </div>
  </header>

  
    <div id="toc-bar" class="d-flex align-items-center justify-content-between invisible">
      <span class="label text-truncate">Asynchronous programming note in .NET</span>
      <button type="button" class="toc-trigger btn me-1">
        <i class="fa-solid fa-list-ul fa-fw"></i>
      </button>
    </div>

    <button id="toc-solo-trigger" type="button" class="toc-trigger btn btn-outline-secondary btn-sm">
      <span class="label ps-2 pe-1">Contents</span>
      <i class="fa-solid fa-angle-right fa-fw"></i>
    </button>

    <dialog id="toc-popup" class="p-0">
      <div class="header d-flex flex-row align-items-center justify-content-between">
        <div class="label text-truncate py-2 ms-4">Asynchronous programming note in .NET</div>
        <button id="toc-popup-close" type="button" class="btn mx-1 my-1 opacity-75">
          <i class="fas fa-close"></i>
        </button>
      </div>
      <div id="toc-popup-content" class="px-4 py-3 pb-4"></div>
    </dialog>
  

  <div class="content">
    <h3 id="background"><span class="me-2"><strong>Background</strong></span><a href="#background" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3>

<p>Asynchronous programming has been around for a while, we can see them everywhere.  It was invented to improve the responsiveness of applications and overall user experience; In another word, no user would like to see a frozen screen.  As a programmer, it takes me a bit effort to fully understand the concept, its implementation and mechanism.</p>

<h3 id="what-i-am-trying-to-say"><span class="me-2"><strong>What I am trying to say</strong></span><a href="#what-i-am-trying-to-say" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3>
<p>Whether you are a new to programming or a developer, you probably have read the following sentence.  “Asynchronous Programming is not about blocking something, but waiting for something to be finished.”</p>

<p>I had a few questions in my mind when I read this and my questions are:</p>
<ol>
  <li>What is the thing it is not trying to block?</li>
  <li>What is the thing it is waiting for?</li>
</ol>

<p>My confusion cleared up after understanding how it works and identifying what confused me. I will include my study notes in this article, and hopefully, they will help you fully understand asynchronous programming in .NET.</p>

<h3 id="how-does-it-work"><span class="me-2"><strong>How does it work</strong></span><a href="#how-does-it-work" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3>
<p>Before we dive into how asynchronous programming works, there are a few key terms we need to understand. I am not attempting to elaborate on the official documentation, but instead sharing my own notes.</p>

<h4 id="thread-vs-task"><span class="me-2">Thread vs Task</span><a href="#thread-vs-task" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4>

<p>A task is some work that is being done, or it can be running or it can be waited.  Compiler will wrap the asynchronous function into a Task object.  The good thing is, as developers, we don’t need to worry about how it is done.</p>

<p>A thread is the smallest unit of execution.  In my mind, I always think a thread is a compartment of a train.</p>

<h4 id="async-vs-await"><span class="me-2">Async vs Await</span><a href="#async-vs-await" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4>

<p><strong>Async</strong> - if a method is decorate with async keyword, the compiler is allowed to invisibly break the metho into pieces that can be paused and resumed as needed.  I will explain what ‘paused’ and ‘resumed’ mean in this context shortly.</p>

<p><strong>Await</strong> - A method or function reaches a point where it needs an operation to complete before it can continue.  (Many documents or articles use background operation; it can confuse junior developrs easily, and this is where I got tripped.  I still remember that I keep asking senior developers, “how come it starts an background operation??? Why???”  In my opinion, we are focusing on the main flow of the method; we don’t necessarily refer it as a background operation, we could just treat as a normal operation)</p>

<p>In the meantime, while waiting for the operation to finish, the thread running this method can perform other tasks, or remain idle.  Technically, remain idle is a task as well.
Once the operation is complete, the thread resumes executing from where it left off, rather than starting from the beginning of the method.</p>

<p>Hopefully, you are still with me.<br />
Pause - the method stop running the current method; in regard to what is the thread doing now? Either doing other jobs or remain idle, none of our business.
Resume - Once the required operation is finished, the thread will resume the execution.</p>

<h3 id="example"><span class="me-2"><strong>Example</strong></span><a href="#example" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3>

<h4 id="generic-example"><span class="me-2">Generic Example</span><a href="#generic-example" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4>
<div class="language-c# highlighter-rouge"><div class="code-header">
        <span data-label-text="C#"><i class="fas fa-code fa-fw small"></i></span>
      <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
</pre></td><td class="rouge-code"><pre><span class="k">async</span> <span class="k">void</span> <span class="nf">button_click</span><span class="p">(</span><span class="kt">object</span> <span class="n">sender</span><span class="p">,</span> <span class="n">EventArg</span> <span class="n">e</span><span class="p">)</span> <span class="p">{</span>

    <span class="n">statusLabel</span><span class="p">.</span><span class="n">text</span> <span class="p">=</span> <span class="s">"Start downloading"</span><span class="p">;</span>
    <span class="k">await</span> <span class="n">downloadFile</span> <span class="p">=</span> <span class="nf">someHttpDownloadTaskAsync</span><span class="p">();</span>
    <span class="n">statusLabel</span><span class="p">.</span><span class="n">text</span> <span class="p">=</span> <span class="s">"Finish downloading"</span><span class="p">;</span>

<span class="p">}</span>
</pre></td></tr></tbody></table></code></div></div>

<ol>
  <li>Thread A is running this method.</li>
  <li>
    <p>When Thread A hits line (line with await); Thread A will pause running (or stop running).  In this context, I prefer using pause, as it will resume running shortly.</p>

    <p>○ Why? Because there is a method with keyword ‘await’.<br />
 ○ What is Thread A doing now? Either doing something else or stay idle; We don’t care.</p>
  </li>
  <li>Thread B start running the ‘someHttpDownloadTaskAync()’ method.  Some documents or articles refer this operation as a background operation.  Once Thread B completes the operation, Thread A will resume running this method.</li>
</ol>

<h4 id="database-operation"><span class="me-2">Database Operation</span><a href="#database-operation" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4>
<p>The following code snippet is a database operation.  Method 1 loads or fetches data from a database; and Method 2 persists data in database.  Both of them are asynchronous method.</p>

<div class="language-c# highlighter-rouge"><div class="code-header">
        <span data-label-text="C#"><i class="fas fa-code fa-fw small"></i></span>
      <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
</pre></td><td class="rouge-code"><pre><span class="k">public</span> <span class="k">async</span> <span class="n">Task</span> <span class="nf">dbOperation</span><span class="p">()</span> <span class="p">{</span>

    <span class="k">await</span> <span class="nf">loadDataFromDbAsync</span><span class="p">();</span> <span class="c1">//method 1</span>
    <span class="k">await</span> <span class="nf">savingDataAsync</span><span class="p">();</span> <span class="c1">//method 2</span>

<span class="p">}</span>
</pre></td></tr></tbody></table></code></div></div>

<ol>
  <li>Assuming the method is running on Thread A.  Thread A will pause running when it hits method 1.<br />
 ○ Why? Because method 1 is asynchronous method and there is a keyword await.  In other word, any thread will be instructed to pause running when they hit method 1.<br />
 ○ What will happen if we remove the await in front of method 1?  Simple. Thread A will continue running without any hesitation.  Because Thread A is not being instructed to pause and Thread A does not care about whether method 1 is asynchronous method or not.  We will discuss this scenario shortly.</li>
  <li>At this stage, method 1 will start running on another thread and let’s called it Thread B.
 ○ What is Thread A doing now? We don’t know, either remain idle or doing something else.  Keep in mind, we don’t care.</li>
  <li>When the operation of method 1 is completed.  Thread A will resume its operation again.<br />
 ○ Where  does it resume from?  Simple, Thread A will start from the line underneath method 1.  In another word, it resume where it was paused.</li>
  <li>Method 2 is a asynchronous method, same story as Method 1.  Thread A will need to pause again, another thread will start running method 2.</li>
</ol>

<h4 id="what-if-the-await-keyword-is-missing-in-method-1"><span class="me-2">What if the await keyword is missing in method 1</span><a href="#what-if-the-await-keyword-is-missing-in-method-1" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4>
<div class="language-c# highlighter-rouge"><div class="code-header">
        <span data-label-text="C#"><i class="fas fa-code fa-fw small"></i></span>
      <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
</pre></td><td class="rouge-code"><pre><span class="k">async</span> <span class="n">Task</span> <span class="nf">dbOperation</span><span class="p">()</span> <span class="p">{</span>
    <span class="nf">loadDataFromDbAsync</span><span class="p">();</span> <span class="c1">//method 1</span>
    <span class="k">await</span> <span class="nf">savingDataAsync</span><span class="p">();</span> <span class="c1">//method 2</span>
<span class="p">}</span>
</pre></td></tr></tbody></table></code></div></div>

<ol>
  <li>When the method is running Thread A.  Thread A will not pause, but continue running.
 ○ Why?  Because thread A is not told to wait, as the await keyword is missing</li>
  <li>Since method 1 is an asynchronous method, another thread will start running this method 1.</li>
  <li>At this stage, Thread A hits method 2 and pause running, as it is told to wait.</li>
</ol>

<p>It seems to be ok, but there is a implication.
Assuming method 1 and method 1 are accessing the same database.<br />
    • Method 1 starts accessting the db context and it has not completed what it is doing.<br />
    • Since we did not tell Thread A to wait for (because we remove the await keyword) Method 1 completing accessing database.
    • Probably, at the same time, Method 2 start its database operation as well. 
You may have encountered the following error in Visual Studio:</p>
<blockquote>
  <p>System.InvalidOperationException: A second operation started on this context before a previous operation completed. This is usually caused by different threads using the same DbContext instance.</p>
</blockquote>

<p>In the example above, both of the methods have a keyword await.  In other word, database operation in method 1 and 2 proceeds in sequence.</p>

<h3 id="clarity"><span class="me-2"><strong>Clarity</strong></span><a href="#clarity" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3>
<p>Asynchronous programming is not about speed; using async/await does not necessarily mean program runs faster.</p>

<h3 id="take-away"><span class="me-2"><strong>Take Away</strong></span><a href="#take-away" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3>
<p>It takes me some efforts to fully understand Asynchronous programming in C#.  Keep one thing in mind, within an asynchronous function, the thread will pause its operation while waiting for an (background) operation to be finished.  How do we know when the thread will pause? Simple, when it run into a line of code, starts with a keyword await and the method is an asynchronous method.</p>

<ol>
  <li>
    <p>What is the thing it is not trying to block?</p>

    <p>○ It does not block other processes that are running or about to run in the application.</p>
  </li>
  <li>
    <p>What is the thing it is waiting for?</p>

    <p>○ It is waiting for asynchronous functions that have been instructed to run asynchronously.  How to instruct them to run asynchronously? Put an await in front of the method.</p>
  </li>
</ol>


  </div>

  <div class="post-tail-wrapper text-muted">
    <!-- categories -->
    
      <div class="post-meta mb-3">
        <i class="far fa-folder-open fa-fw me-1"></i>
        
          <a href="/categories/dotnet/">dotnet</a>
      </div>
    

    <!-- tags -->
    
      <div class="post-tags">
        <i class="fa fa-tags fa-fw me-1"></i>
        
          <a
            href="/tags/asynchronous-prgramming/"
            class="post-tag no-text-decoration"
          >asynchronous prgramming</a>
        
      </div>
    

    <div
      class="
        post-tail-bottom
        d-flex justify-content-between align-items-center mt-5 pb-2
      "
    >
      <div class="license-wrapper">
        
          

          This post is licensed under 
        <a href="https://creativecommons.org/licenses/by/4.0/">
          CC BY 4.0
        </a>
         by the author.
        
      </div>

      <!-- Post sharing snippet -->

<div class="share-wrapper d-flex align-items-center">
  <span class="share-label text-muted">Share</span>
  <span class="share-icons">
    
    
    

    

      

      <a href="https://twitter.com/intent/tweet?text=Asynchronous%20programming%20note%20in%20.NET%20-%20Nan%20W&url=%2Fposts%2Fasync-programming-in-dotnet%2F" target="_blank" rel="noopener" data-bs-toggle="tooltip" data-bs-placement="top" title="Twitter" aria-label="Twitter">
        <i class="fa-fw fa-brands fa-square-x-twitter"></i>
      </a>
    

      

      <a href="https://www.facebook.com/sharer/sharer.php?title=Asynchronous%20programming%20note%20in%20.NET%20-%20Nan%20W&u=%2Fposts%2Fasync-programming-in-dotnet%2F" target="_blank" rel="noopener" data-bs-toggle="tooltip" data-bs-placement="top" title="Facebook" aria-label="Facebook">
        <i class="fa-fw fab fa-facebook-square"></i>
      </a>
    

      

      <a href="https://t.me/share/url?url=%2Fposts%2Fasync-programming-in-dotnet%2F&text=Asynchronous%20programming%20note%20in%20.NET%20-%20Nan%20W" target="_blank" rel="noopener" data-bs-toggle="tooltip" data-bs-placement="top" title="Telegram" aria-label="Telegram">
        <i class="fa-fw fab fa-telegram"></i>
      </a>
    

    <button
      id="copy-link"
      aria-label="Copy link"
      class="btn small"
      data-bs-toggle="tooltip"
      data-bs-placement="top"
      title="Copy link"
      data-title-succeed="Link copied successfully!"
    >
      <i class="fa-fw fas fa-link pe-none fs-6"></i>
    </button>
  </span>
</div>

    </div>
    <!-- .post-tail-bottom -->
  </div>
  <!-- div.post-tail-wrapper -->
</article>


            
          </main>

          <!-- panel -->
          <aside aria-label="Panel" id="panel-wrapper" class="col-xl-3 ps-2 text-muted">
            <div class="access">
              <!-- Get 5 last posted/updated posts -->














  <section id="access-lastmod">
    <h2 class="panel-heading">Recently Updated</h2>
    <ul class="content list-unstyled ps-0 pb-1 ms-1 mt-2">
      
        
        
        
        <li class="text-truncate lh-lg">
          <a href="/posts/async-programming-in-dotnet/">Asynchronous programming note in .NET</a>
        </li>
      
    </ul>
  </section>
  <!-- #access-lastmod -->


              <!-- The trending tags list -->















  
    
    
    
    
      
        
        



  <section>
    <h2 class="panel-heading">Trending Tags</h2>
    <div class="d-flex flex-wrap mt-3 mb-1 me-3">
      
        
        <a class="post-tag btn btn-outline-primary" href="/tags/asynchronous-prgramming/">asynchronous prgramming</a>
      
    </div>
  </section>


            </div>

            
              
              






  <div class="toc-border-cover z-3"></div>
  <section id="toc-wrapper" class="position-sticky ps-0 pe-4">
    <h2 class="panel-heading ps-3 pb-2 mb-0">Contents</h2>
    <nav id="toc"></nav>
  </section>


            
          </aside>
        </div>

        <div class="row">
          <!-- tail -->
          <div id="tail-wrapper" class="col-12 col-lg-11 col-xl-9 px-md-4">
            
              
              <!-- Recommend the other 3 posts according to the tags and categories of the current post. -->

<!-- The total size of related posts -->


<!-- An random integer that bigger than 0 -->


<!-- Equals to TAG_SCORE / {max_categories_hierarchy} -->















  

  
    











            
              
              <!-- Navigation buttons at the bottom of the post. -->

<nav class="post-navigation d-flex justify-content-between" aria-label="Post Navigation">
  
  

  
    <div class="btn btn-outline-primary disabled" aria-label="Older">
      <p>-</p>
    </div>
  

  
    <div class="btn btn-outline-primary disabled" aria-label="Newer">
      <p>-</p>
    </div>
  
</nav>

            

            <!-- The Footer -->

<footer
  aria-label="Site Info"
  class="
    d-flex flex-column justify-content-center text-muted
    flex-lg-row justify-content-lg-between align-items-lg-center pb-lg-3
  "
>
  <p>©
    <time>2024</time>

    
      <a href="https://twitter.com/username">Nan</a>.
    

    
      <span
        data-bs-toggle="tooltip"
        data-bs-placement="top"
        title="Except where otherwise noted, the blog posts on this site are licensed under the Creative Commons Attribution 4.0 International (CC BY 4.0) License by the author."
      >Some rights reserved.</span>
    
  </p>

  <p>Using the <a
        data-bs-toggle="tooltip"
        data-bs-placement="top"
        title="v7.2.0"
        href="https://github.com/cotes2020/jekyll-theme-chirpy"
        target="_blank"
        rel="noopener"
      >Chirpy</a> theme for <a href="https://jekyllrb.com" target="_blank" rel="noopener">Jekyll</a>.
  </p>
</footer>

          </div>
        </div>

        <!-- The Search results -->

<div id="search-result-wrapper" class="d-flex justify-content-center d-none">
  <div class="col-11 content">
    <div id="search-hints">
      <!-- The trending tags list -->















  
    
    
    
    
      
        
        



  <section>
    <h2 class="panel-heading">Trending Tags</h2>
    <div class="d-flex flex-wrap mt-3 mb-1 me-3">
      
        
        <a class="post-tag btn btn-outline-primary" href="/tags/asynchronous-prgramming/">asynchronous prgramming</a>
      
    </div>
  </section>


    </div>
    <div id="search-results" class="d-flex flex-wrap justify-content-center text-muted mt-3"></div>
  </div>
</div>

      </div>

      <aside aria-label="Scroll to Top">
        <button id="back-to-top" type="button" class="btn btn-lg btn-box-shadow">
          <i class="fas fa-angle-up"></i>
        </button>
      </aside>
    </div>

    <div id="mask" class="d-none position-fixed w-100 h-100 z-1"></div>

    
      <aside
  id="notification"
  class="toast"
  role="alert"
  aria-live="assertive"
  aria-atomic="true"
  data-bs-animation="true"
  data-bs-autohide="false"
>
  <div class="toast-header">
    <button
      type="button"
      class="btn-close ms-auto"
      data-bs-dismiss="toast"
      aria-label="Close"
    ></button>
  </div>
  <div class="toast-body text-center pt-0">
    <p class="px-2 mb-3">A new version of content is available.</p>
    <button type="button" class="btn btn-primary" aria-label="Update">
      Update
    </button>
  </div>
</aside>

    

    <!-- Embedded scripts -->

    
      
      <!-- The comments switcher -->


    

    <!--
  Jekyll Simple Search loader
  See: <https://github.com/christian-fei/Simple-Jekyll-Search>
-->





<script>
  
  document.addEventListener('DOMContentLoaded', () => {
    SimpleJekyllSearch({
      searchInput: document.getElementById('search-input'),
      resultsContainer: document.getElementById('search-results'),
      json: '/assets/js/data/search.json',
      searchResultTemplate: '  <article class="px-1 px-sm-2 px-lg-4 px-xl-0">    <header>      <h2><a href="{url}">{title}</a></h2>      <div class="post-meta d-flex flex-column flex-sm-row text-muted mt-1 mb-1">        {categories}        {tags}      </div>    </header>    <p>{snippet}</p>  </article>',
      noResultsText: '<p class="mt-5">Oops! No results found.</p>',
      templateMiddleware: function(prop, value, template) {
        if (prop === 'categories') {
          if (value === '') {
            return `${value}`;
          } else {
            return `<div class="me-sm-4"><i class="far fa-folder fa-fw"></i>${value}</div>`;
          }
        }

        if (prop === 'tags') {
          if (value === '') {
            return `${value}`;
          } else {
            return `<div><i class="fa fa-tag fa-fw"></i>${value}</div>`;
          }
        }
      }
    });
  });
</script>

  </body>
</html>

